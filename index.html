<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Park Plan Survey</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, Arial, sans-serif; max-width: 960px; margin: 24px auto; padding: 0 12px; }
    h1 { margin: 0 0 12px; }
    .meta { font-size: 14px; opacity: .8; margin-bottom: 12px; }
    .card { border: 1px solid #ddd; border-radius: 8px; padding: 12px; margin: 12px 0; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 8px; }
    img { max-width: 100%; border-radius: 6px; display: block; }
    .row { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    button { padding: 10px 16px; border-radius: 8px; border: 1px solid #333; background: #fff; cursor: pointer; }
    #status.ok { color: #096; }
    #status.err { color: #c00; }
    .muted { font-size: 12px; opacity: .7; }
    label.block { display: block; margin-top: 8px; }
    input[type="text"] { padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
    /* Consent modal */
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 9999; }
    .modal { background: #fff; padding: 18px; max-width: 720px; width: 96%; border-radius: 8px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); }
    .modal h2 { margin-top: 0; }
    .consent-body { max-height: 44vh; overflow: auto; border: 1px solid #eee; padding: 12px; margin-bottom: 12px; border-radius: 6px; background: #fafafa; }
    .modal-row { display:flex; gap:8px; align-items:center; margin-top:8px; }
    .modal input[type="password"], .modal input[type="text"] { width: 100%; }
    .modal .muted { margin-left: 8px; font-size: 13px; }
  /* emphasized instructional text */
  .card.emphasized { color: #b30000; font-size: 18px; }
  </style>
</head>
<body>
  <h1>Park Plan Survey</h1>

  <div class="card">
    <h2>What is Passive Surveillance?</h2>
    <p>Passive surveillance describes how the physical features of an environment influence people’s ability to oversee and monitor what happens within it, without deliberate effort or formal systems like cameras. It is about how the design of a space naturally supports visibility and awareness.</p>
    <p>For instance, in a park setting, open sightlines across open areas allow users to observe the activities of others while also making their own presence more noticeable. Vegetation such as trees and bushes can either enhance visibility by framing views or reduce it by creating blind spots and potential hiding places. When dense planting or hidden corners are introduced, they limit both the ability to see others and to be seen, which can make a space feel more private but also less overseen. At the same time, some arrangements of vegetation can encourage people to occupy more visible areas, increasing the likelihood that the space is naturally overseen by its users.</p>
    <p>This matters because the degree of passive surveillance strongly shapes how safe and comfortable people feel: open, visible areas tend to foster a greater sense of security, while secluded areas may heighten feelings of vulnerability by reducing opportunities for natural oversight.</p>

    <h2>Your Role in This Study</h2>
    <p>In this study, you will be shown images of a park with different arrangements of bushes and vegetation. We are interested in your perceptions of how much passive surveillance each image seems to provide.</p>
    <p>There are no right or wrong answers — we are looking for your personal impressions. Your responses will help us understand how design elements influence feelings of visibility and safety in public spaces.</p>
  </div>

  <div class="card emphasized">
    <p><em>For each question below, <strong>please select the design alternative that best balances the following two criteria:</strong></em></p>
    <ul>
      <li><em><strong>It provides a high level of aesthetic quality in the arrangement of vegetation</strong></em></li>
      <li><em><strong>It provides good passive surveillance — that is, clear visibility and the ability to see and be seen within the space</strong></em></li>
    </ul>
    <p><em>Please press the <strong>Submit button</strong> once you've answered all questions. Please wait until you see the saved message - you can then quit or load another set of questions.</em></p>
  </div>

  <!-- Scenario and LLM UI removed; these values will be logged to the console. -->

  <!-- Participant ID UI removed; a GUID will be assigned automatically on page load. -->

  <div id="pairsHost"></div>

  <div class="row" style="margin-top:12px;">
    <button id="submitBtn">Submit</button>
    <div id="status" class="muted"></div>
  </div>

  <!-- Consent modal (hidden by default) -->
  <div id="consentModal" class="modal-overlay" role="dialog" aria-modal="true">
    <div class="modal">
      <h2>Survey Consent</h2>
      <div class="consent-body">
        <p>Please read the following before participating in this survey.</p>
        <p><strong>Purpose:</strong> This survey collects preferences between two images for research purposes.</p>
        <p><strong>Data:</strong> We will record and analyse your selections. Your responses and its analysis will not be published.</p>
        <p><strong>Confidentiality:</strong> No personal identifying information will be collected.</p>
        <p>By entering the password below and clicking Continue you confirm you consent to participate.</p>
      </div>

      <div class="modal-row">
        <label style="flex:1">Password provided in your personal invitation to participate: <input id="secretInput" type="password" placeholder="Enter password"></label>
      </div>
      <div class="modal-row">
        <label><input id="consentCheckbox" type="checkbox"> I consent to participate</label>
      </div>
      <div class="modal-row" style="justify-content:flex-end; margin-top:12px;">
        <div id="consentStatus" class="muted" style="margin-right:auto"></div>
        <button id="consentContinueBtn">Continue</button>
      </div>
    </div>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>
